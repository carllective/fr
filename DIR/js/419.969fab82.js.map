{"version":3,"file":"js/419.969fab82.js","mappings":"kKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAQD,EAAIE,MAAMC,GAAG,OAAOH,EAAII,GAAG,EACzE,EACGC,EAAkB,CAAC,WAAY,IAAIL,EAAIC,KAAKE,EAAGH,EAAIE,MAAMC,GAAG,OAAOA,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,aAAa,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,UAChI,G,UCIGC,EAAI,EAAQ,MAIhB,GACAC,KAAAA,YACAC,WAAAA,CAAAA,EAEAC,MAAAA,CACAC,cAAAA,CACAC,QAAAA,GACAC,QAAAA,IAAAA,GACA,GACA,oBAEA,EACAC,MAAAA,IAGAC,SAAAA,KACA,mCAEAC,QAAAA,CACAC,YACA,wBACA,qBACA,sCACA,wCAEA,sBACAC,OAAAA,CAAAA,KAAAA,UAAAA,KAAAA,YACAC,KAAAA,KAAAA,cAAAA,GAAAA,IAEAZ,EAAAA,UAAAA,iFAAAA,CAAAa,YAAAA,4PAAA,gBACAC,EAAAA,KAAAA,IAAAA,GAGA,EAEA,0BAEA,cACAC,QAAAA,EAAAA,MACAC,SAAAA,CAAAA,GAAAA,IACAC,WAAAA,CAAAA,GAAAA,MAGA,UACAF,QAAAA,EAAAA,MACAC,SAAAA,CAAAA,GAAAA,IACAC,WAAAA,CAAAA,GAAAA,MAIA,yBAGA,kBAEA,+BAAAC,KAAAA,EAAAA,MAAAA,EAAAA,IAAA,gBACAC,UAAA,qNACoEC,EAAEC,kEAClBD,EAAEE,SAAuB,OAAd5B,KAAK6B,KAAgB,YAAc,sBAAlG,CAAAC,OAAAA,EAAAA,MAAAA,GAAAA,MACAC,EAAAA,GAAAA,aAAAA,KACAA,EAAAA,WAAAA,GAKA,IAEA,EAEA,sBACA,uBACA,qBACA,4EAEA,cACAV,QAAAA,EAAAA,MACAC,SAAAA,CAAAA,GAAAA,IACAC,WAAAA,CAAAA,GAAAA,MAGA,4DAAAC,KAAAA,IAAA,gBACAC,UAAA,8CAAAK,OAAAA,EAAAA,MAAAA,GAAAA,MAEAE,EAAAA,GAAAA,aAAAA,KACAA,EAAAA,WAAAA,IAEAA,EAAAA,GAAAA,YAAAA,KACAA,EAAAA,YAAAA,GAEA,CACA,GAEAC,OACA,OACAC,IAAAA,KACAC,UAAAA,QACAC,YAAAA,SAEA,EACAC,UACA,0FACAC,OAAAA,SAAAA,EAAAA,EACA,GCjHuP,I,UCQnPC,GAAY,OACd,EACAzC,EACAM,GACA,EACA,KACA,WACA,MAIF,EAAemC,EAAiB,O","sources":["webpack://carllective/./src/components/MapPage.vue","webpack://carllective/src/components/MapPage.vue","webpack://carllective/./src/components/MapPage.vue?47c6","webpack://carllective/./src/components/MapPage.vue?046a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"map_page\"}},[_c('div',{attrs:{\"id\":\"map\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"map_page\">\n    <div id=\"map\"></div>\n  </div>\n</template>\n\n<script>\nvar L = require('leaflet');\nimport {mapState} from \"vuex\";\n\n// var leafletMap = require('leaflet-map');\nexport default {\n  name: 'MeetsPage',\n  components: {\n  },\n  watch: {\n    your_location: {\n      handler(e) {\n        console.log(e);\n          if (e) {\n            this.getMyLocation();\n          }\n      },\n      deep:true\n    }\n  },\n  computed: {\n    ...mapState([\"your_location\", \"lang\"])\n  },\n  methods: {\n    renderMap() {\n      return new Promise((res) => {\n        if (this.your_location) {\n          this.centerLat = this.your_location.lat;\n          this.centerLong = this.your_location.lon;\n        }\n        this.map = L.map('map', {\n            center: [this.centerLat , this.centerLong],\n            zoom: this.your_location ? 10 : 4\n        });\n        L.tileLayer('https://api.maptiler.com/maps/voyager/{z}/{x}/{y}.png?key=UhqYthhZlPgjJOmBxOln', {attribution: '<a href=\"https://carto.com/\" target=\"_blank\">&copy; CARTO</a> <a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'}).addTo(this.map);\n        res(this.map);\n      })\n      \n    },\n\n    async getMeetsLocations() {\n\n      var meetsIcon = L.icon({\n          iconUrl: require('../assets/C_Map_Marker_Car_Meets.png'),\n          iconSize: [30, 42],\n          iconAnchor: [15, 42],\n      });\n\n       var meetsIconToday = L.icon({\n          iconUrl: require('../assets/C_Map_Marker_Car_Meets_TODAY.png'),\n          iconSize: [30, 42],\n          iconAnchor: [15, 42],\n      });\n\n\n      this.$meets.forEach((i => {\n\n        // Only place markers if they have latitude and longitudes\n        if (i.Lat && i.Long) {\n\n          var marker = L.marker([i.Lat, i.Long], {icon: i.Today ? meetsIconToday : meetsIcon}).addTo(this.map)\n          .bindPopup(`${i.Today ? `<h3 style=\"color: red; text-align: center;\">TODAY!</h3>` : ``}<h3 style=\"color: black; margin: 0; text-align: center;\">${i.Name}</h3>\n          <p style=\"color: black; margin: 0; text-align: center;\">${i.Address}</p>\n          <p style=\"text-align: center;\"><a href=\"${i.url}\" >${this.lang === 'en' ? 'Read More' : 'Lire Plus'}</a></p>`, {offset: L.point(0, -30)});\n          marker.on(\"mouseover\", () => {\n            marker.openPopup();\n          });\n          // marker.on(\"mouseout\", () => {\n          //   marker.closePopup();\n          // })\n        }\n      }))\n    },\n\n    async getMyLocation() {\n      if (this.your_location) {\n        this.map.setZoom(10);\n        this.map.panTo(new L.LatLng(this.your_location.lat, this.your_location.lon));\n\n        var myIcon = L.icon({\n          iconUrl: require('../assets/C_Map_Marker.png'),\n          iconSize: [38, 53],\n          iconAnchor: [19, 53],\n        });\n\n        var yourmarker = L.marker([this.your_location.lat, this.your_location.lon], {icon: myIcon}).addTo(this.map)\n        .bindPopup('<p style=\"color: black;\">Your Location</p>', {offset: L.point(0, -40)});\n\n        yourmarker.on(\"mouseover\", () => {\n          yourmarker.openPopup();\n        });\n        yourmarker.on(\"mouseout\", () => {\n          yourmarker.closePopup();\n        })\n      }\n    }\n  },\n  data() {\n    return {\n      map: null,\n      centerLat: 56.1304,\n      centerLong: -106.3468\n    }\n  },\n  mounted() {\n   this.renderMap().then(() => Promise.all([this.getMeetsLocations(), this.getMyLocation()]));\n   window.scrollTo(0, 0);\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../styles.scss\";\n#map {\n    min-height: 86vh;\n    z-index: 0;\n}\np {\n\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MapPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapPage.vue?vue&type=template&id=170438de&scoped=true&\"\nimport script from \"./MapPage.vue?vue&type=script&lang=js&\"\nexport * from \"./MapPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapPage.vue?vue&type=style&index=0&id=170438de&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"170438de\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","attrs","L","name","components","watch","your_location","handler","console","deep","computed","methods","renderMap","center","zoom","attribution","res","iconUrl","iconSize","iconAnchor","icon","bindPopup","i","Address","url","lang","offset","marker","yourmarker","data","map","centerLat","centerLong","mounted","window","component"],"sourceRoot":""}